//>>built
define("jspire/store/Memory",["dojo/_base/declare", "dojo/request", "jspire/request/Xml"],function(_1, R, RXml){

return {

addLoaderFromKeyValueXml: function(memory, url, ri, q, k, v){

memory._Url = url;
memory._RootItem = ri;
memory._Query = q;
memory._Key = k;
memory._Value = v;

// Carga Asincronamente los datos
memory.Load = function(){
            // Request the text file
   R.get(memory._Url, {
		query: memory._Query,
            // Parse data from xml
            handleAs: "xml"
        }).then(
                function(response){
var d = new RXml.getFromXhr(response, memory._RootItem);
numrows = d.length;
alert(numrows);
var Items = [];

numfields = n.length;

var i = 0;
while(i<numrows){
Items[i] =    {value: d.getStringFromB64(i, memory._Value), id: d.getString(i, memory._Key)};
i++;
}
memory.data = Items;

                },
                function(error){
alert(error);
                }
            );

}

return memory;
}

};
});
