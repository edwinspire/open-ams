"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var lang_1 = require("@dojo/core/lang");
var fs_1 = require("fs");
var path_1 = require("path");
function on(emitter, event, listener) {
    emitter.on(event, listener);
    return lang_1.createHandle(function () { return emitter.removeListener(event, listener); });
}
exports.on = on;
function fileExists(filename) {
    try {
        fs_1.statSync(filename);
        return true;
    }
    catch (error) {
        return false;
    }
}
exports.fileExists = fileExists;
function writeFile(data, filename) {
    return new Promise(function (resolve, reject) {
        function mkdirp(dir) {
            if (!dir) {
                return;
            }
            try {
                fs_1.mkdirSync(dir);
            }
            catch (error) {
                if (error.code === 'ENOENT') {
                    mkdirp(path_1.dirname(dir));
                    mkdirp(dir);
                }
                else {
                    if (!fs_1.statSync(dir).isDirectory()) {
                        throw error;
                    }
                }
            }
        }
        mkdirp(path_1.dirname(filename));
        fs_1.writeFile(filename, data, function (error) {
            if (error) {
                reject(error);
            }
            else {
                resolve();
            }
        });
    });
}
exports.writeFile = writeFile;
//# sourceMappingURL=util.js.map