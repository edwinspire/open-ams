{"version":3,"file":"resolveSuites.js","sourceRoot":"","sources":["../../../../src/lib/middleware/resolveSuites.ts"],"names":[],"mappings":";;;;;;;;;;;IAAA,2BAA4B;IAI5B,qCAA2C;IAE3C,uBAAsC,OAAgB;QACrD,MAAM,CAAC,UAAC,OAAO,EAAE,QAAQ;YACxB,IAAM,KAAK,GAAG,WAAK,CAAC,OAAO,CAAC,GAAI,EAAE,IAAI,CAAC,CAAC,KAAK,CAAC;YAC9C,IAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;gBACzC,CAAC,CAAC,KAAK,CAAC,MAAM;gBACd,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAClB,IAAM,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,kBAAW,CAAC,MAAM,CAAC,CAAC,CAAC;YAC3D,OAAO,CAAC,QAAQ,CAAC,GAAG,CACnB,kCAAkC,EAClC,MAAM,EACN,IAAI,EACJ,cAAc,CACd,CAAC;YACF,QAAQ,CAAC,SAAS,CAAC,GAAG,EAAE;gBACvB,cAAc,EAAE,kBAAkB;gBAClC,gBAAgB,EAAE,cAAc,CAAC,MAAM;aACvC,CAAC,CAAC;YACH,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;QAC9B,CAAC,CAAC;IACH,CAAC;IAnBD,gCAmBC","sourcesContent":["import { parse } from 'url';\nimport { RequestHandler } from 'express';\n\nimport { Context } from '../Server';\nimport { expandFiles } from '../node/util';\n\nexport default function resolveSuites(context: Context): RequestHandler {\n\treturn (request, response) => {\n\t\tconst query = parse(request.url!, true).query;\n\t\tconst suites = Array.isArray(query.suites)\n\t\t\t? query.suites\n\t\t\t: [query.suites];\n\t\tconst resolvedSuites = JSON.stringify(expandFiles(suites));\n\t\tcontext.executor.log(\n\t\t\t'resolveSuites middlware expanded',\n\t\t\tsuites,\n\t\t\t'to',\n\t\t\tresolvedSuites\n\t\t);\n\t\tresponse.writeHead(200, {\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'Content-Length': resolvedSuites.length\n\t\t});\n\t\tresponse.end(resolvedSuites);\n\t};\n}\n"]}