{"version":3,"file":"Console.js","sourceRoot":"","sources":["../../../../src/lib/reporters/Console.ts"],"names":[],"mappings":"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","sourcesContent":["import { Executor } from '../executors/Executor';\nimport Suite from '../Suite';\nimport Test from '../Test';\nimport Reporter, { eventHandler, ReporterOptions } from './Reporter';\n\n/**\n * The console reporter outputs to the browser console.\n */\nexport default class ConsoleReporter extends Reporter {\n\tprivate _hasGrouping: boolean;\n\tprivate _testId: keyof Test;\n\n\tconstructor(executor: Executor, options: ReporterOptions = {}) {\n\t\tsuper(executor, options);\n\t\tthis._hasGrouping =\n\t\t\t'group' in this.console && 'groupEnd' in this.console;\n\t\tthis._testId = this._hasGrouping ? 'name' : 'id';\n\t}\n\n\t@eventHandler()\n\terror(error: Error) {\n\t\tthis.console.warn('FATAL ERROR');\n\t\tthis.console.error(this.formatError(error));\n\t}\n\n\t@eventHandler()\n\tsuiteEnd(suite: Suite) {\n\t\t// IE<10 does not provide a global console object when Developer Tools\n\t\t// is turned off\n\t\tif (!this.console) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (suite.error) {\n\t\t\tthis.console.warn('SUITE ERROR');\n\t\t\tthis.console.error(this.formatError(suite.error));\n\t\t} else {\n\t\t\tconst numTests = suite.numTests;\n\t\t\tconst numFailedTests = suite.numFailedTests;\n\t\t\tconst numSkippedTests = suite.numSkippedTests;\n\t\t\tconst numNotRunTests =\n\t\t\t\tnumTests -\n\t\t\t\t(suite.numPassedTests + numFailedTests + numSkippedTests);\n\t\t\tlet message = numFailedTests + '/' + numTests + ' tests failed';\n\n\t\t\tif (numSkippedTests + numNotRunTests > 0) {\n\t\t\t\tmessage += ` (${numSkippedTests + numNotRunTests} not run)`;\n\t\t\t}\n\n\t\t\tthis.console[numFailedTests ? 'warn' : 'info'](message);\n\t\t}\n\n\t\tthis._hasGrouping && this.console.groupEnd();\n\t}\n\n\t@eventHandler()\n\tsuiteStart(suite: Suite) {\n\t\t// only start group for non-root suite\n\t\tthis._hasGrouping && suite.hasParent && this.console.group(suite.name);\n\t}\n\n\t@eventHandler()\n\ttestEnd(test: Test) {\n\t\tif (test.error) {\n\t\t\tthis.console.error(\n\t\t\t\t`FAIL: ${test[this._testId]} (${test.timeElapsed}ms)`\n\t\t\t);\n\t\t\tthis.console.error(this.formatError(test.error));\n\t\t} else if (test.skipped) {\n\t\t\tthis.console.log(`SKIP: ${test[this._testId]} (${test.skipped})`);\n\t\t} else {\n\t\t\tthis.console.log(\n\t\t\t\t`PASS: ${test[this._testId]} (${test.timeElapsed}ms)`\n\t\t\t);\n\t\t}\n\t}\n}\n"]}