{"version":3,"file":"CalendarCell.js","sourceRoot":"","sources":["CalendarCell.ts"],"names":[],"mappings":";;;;;;;;;;;;IAAA,2DAA0D;IAC1D,0DAAuF;IACvF,sDAAiD;IACjD,yCAAwC;IAExC,6CAA+C;IA6BlC,QAAA,UAAU,GAAG,oBAAW,CAAC,uBAAU,CAAC,CAAC;IAGlD;QAAiG,4CAAmB;QAApH;;QAuDA,CAAC;QAtDQ,mCAAQ,GAAhB,UAAiB,KAAiB;YACjC,KAAK,CAAC,eAAe,EAAE,CAAC;YAClB,IAAA,oBAAqD,EAAnD,cAAI,EAAE,gBAAgB,EAAhB,qCAAgB,EAAE,oBAAO,CAAqB;YAC5D,OAAO,IAAI,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;QACpC,CAAC;QAEO,qCAAU,GAAlB,UAAmB,KAAoB;YACtC,KAAK,CAAC,eAAe,EAAE,CAAC;YAChB,IAAA,qCAAS,CAAqB;YACtC,SAAS,IAAI,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,cAAQ,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACxE,CAAC;QAES,qCAAU,GAApB,UAAqB,IAAY;YAChC,MAAM,CAAC,KAAC,CAAC,MAAM,EAAE,CAAE,KAAG,IAAM,CAAE,CAAC,CAAC;QACjC,CAAC;QAES,6CAAkB,GAA5B;YACO,IAAA,oBAIa,EAHlB,gBAAgB,EAAhB,qCAAgB,EAChB,gBAAgB,EAAhB,qCAAgB,EAChB,aAAa,EAAb,kCAAa,CACM;YAEpB,MAAM,CAAC;gBACN,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI;gBAClC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI;gBAClC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI;aAC5B,CAAC;QACH,CAAC;QAES,iCAAM,GAAhB;YACO,IAAA,oBAMa,EALlB,wBAAS,EACT,cAAI,EACJ,iBAAiB,EAAjB,sCAAiB,EACjB,gBAAgB,EAAhB,qCAAgB,EAChB,gCAAa,CACM;YAEpB,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBACf,IAAI,CAAC,IAAI,CAAC,eAAK,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBAC7B,aAAa,IAAI,aAAa,EAAE,CAAC;YAClC,CAAC;YAED,MAAM,CAAC,KAAC,CAAC,IAAI,EAAE;gBACd,GAAG,EAAE,MAAM;gBACX,IAAI,EAAE,UAAU;gBAChB,eAAe,EAAE,KAAG,QAAU;gBAC9B,QAAQ,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC5B,OAAO,EAAE,IAAI,CAAC,KAAK,mBAAG,GAAG,CAAC,IAAI,GAAK,IAAI,CAAC,kBAAkB,EAAE,EAAG;gBAC/D,OAAO,EAAE,IAAI,CAAC,QAAQ;gBACtB,SAAS,EAAE,IAAI,CAAC,UAAU;aAC1B,EAAE,CAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAE,CAAC,CAAC;QAC/B,CAAC;QAtDW,gBAAgB;YAD5B,cAAK,CAAC,GAAG,CAAC;WACE,gBAAgB,CAuD5B;QAAD,uBAAC;KAAA,AAvDD,CAAiG,kBAAU,GAuD1G;IAvDY,4CAAgB;IAyD7B;QAA0C,wCAAwC;QAAlF;;QAAoF,CAAC;QAAD,mBAAC;IAAD,CAAC,AAArF,CAA0C,gBAAgB,GAA2B","sourcesContent":["import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { ThemedMixin, ThemedProperties, theme } from '@dojo/widget-core/mixins/Themed';\nimport Focus from '@dojo/widget-core/meta/Focus';\nimport { v } from '@dojo/widget-core/d';\nimport { DNode } from '@dojo/widget-core/interfaces';\nimport * as css from '../theme/calendar.m.css';\n\n/**\n * @type CalendarCellProperties\n *\n * Properties that can be set on a Calendar Date Cell\n *\n * @property callFocus        Used to immediately call focus on the cell\n * @property date             Integer date value\n * @property disabled         Boolean, whether or not the date is in the current month\n * @property focusable        Boolean, whether or not the date can receive focus\n * @property selected         True if the date is currently selected\n * @property today            True if the date the same as the current day\n * @property onClick          Callback function for the click event\n * @property onFocusCalled    Callback function when the cell receives focus\n * @property onKeyDown        Callback function for the key down event\n */\nexport interface CalendarCellProperties extends ThemedProperties {\n\tcallFocus?: boolean;\n\tdate: number;\n\tdisabled?: boolean;\n\tfocusable?: boolean;\n\tselected?: boolean;\n\ttoday?: boolean;\n\tonClick?(date: number, disabled: boolean): void;\n\tonFocusCalled?(): void;\n\tonKeyDown?(key: number, preventDefault: () => void): void;\n}\n\nexport const ThemedBase = ThemedMixin(WidgetBase);\n\n@theme(css)\nexport class CalendarCellBase<P extends CalendarCellProperties = CalendarCellProperties> extends ThemedBase<P, null> {\n\tprivate _onClick(event: MouseEvent) {\n\t\tevent.stopPropagation();\n\t\tconst { date, disabled = false, onClick } = this.properties;\n\t\tonClick && onClick(date, disabled);\n\t}\n\n\tprivate _onKeyDown(event: KeyboardEvent) {\n\t\tevent.stopPropagation();\n\t\tconst { onKeyDown } = this.properties;\n\t\tonKeyDown && onKeyDown(event.which, () => { event.preventDefault(); });\n\t}\n\n\tprotected formatDate(date: number): DNode {\n\t\treturn v('span', [ `${date}` ]);\n\t}\n\n\tprotected getModifierClasses(): (string | null)[] {\n\t\tconst {\n\t\t\tdisabled = false,\n\t\t\tselected = false,\n\t\t\ttoday = false\n\t\t} = this.properties;\n\n\t\treturn [\n\t\t\tdisabled ? css.inactiveDate : null,\n\t\t\tselected ? css.selectedDate : null,\n\t\t\ttoday ? css.todayDate : null\n\t\t];\n\t}\n\n\tprotected render(): DNode {\n\t\tconst {\n\t\t\tcallFocus,\n\t\t\tdate,\n\t\t\tfocusable = false,\n\t\t\tselected = false,\n\t\t\tonFocusCalled\n\t\t} = this.properties;\n\n\t\tif (callFocus) {\n\t\t\tthis.meta(Focus).set('root');\n\t\t\tonFocusCalled && onFocusCalled();\n\t\t}\n\n\t\treturn v('td', {\n\t\t\tkey: 'root',\n\t\t\trole: 'gridcell',\n\t\t\t'aria-selected': `${selected}`,\n\t\t\ttabIndex: focusable ? 0 : -1,\n\t\t\tclasses: this.theme([ css.date, ...this.getModifierClasses() ]),\n\t\t\tonclick: this._onClick,\n\t\t\tonkeydown: this._onKeyDown\n\t\t}, [ this.formatDate(date) ]);\n\t}\n}\n\nexport default class CalendarCell extends CalendarCellBase<CalendarCellProperties> {}\n"]}