{"version":3,"sources":["webpack://pen_onitoring_ystem/./src/widgets/account_activation/account_activation.m.css","webpack://pen_onitoring_ystem/./src/widgets/account_activation/account_activation.ts"],"names":["module","exports"," _key","root","body","wrapper","form-success","container","form","links_block","bg_bubbles","square","__webpack_require__","r","__webpack_exports__","d","AccountActivation","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_WidgetBase__WEBPACK_IMPORTED_MODULE_1__","_account_activation_m_css__WEBPACK_IMPORTED_MODULE_2__","_dojo_widgets_snackbar__WEBPACK_IMPORTED_MODULE_3__","[object Object]","this","_openSnack","_MsgSnackBar","document","cookie","console","log","type","msg","_SnackType","invalidate","setTimeout","Object","classes","action","method","onsubmit","e","paramsString","window","location","hash","split","searchParams","URLSearchParams","datacode","code","get","resp","fetch","JSON","stringify","headers","Content-Type","data","json","status","Register","SnackBar","Message","href","preventDefault","name","value","open","leading","messageRenderer"],"mappings":"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","file":"9.4a14354ada8674a9c807.bundle.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"OpenMonitoringSystem/account_activation\",\"root\":\"account_activation-m__root__309e8dLFnFN\",\"body\":\"account_activation-m__body__309e8d6Uqi-\",\"wrapper\":\"account_activation-m__wrapper__309e8drKOAi\",\"form-success\":\"account_activation-m__form-success__309e8d10mhh\",\"container\":\"account_activation-m__container__309e8d19dSw\",\"form\":\"account_activation-m__form__309e8d1bY5q\",\"links_block\":\"account_activation-m__links_block__309e8d1qUYl\",\"bg_bubbles\":\"account_activation-m__bg_bubbles__309e8di3rXe\",\"square\":\"account_activation-m__square__309e8d228oZ\"};","import { v, w } from '@dojo/framework/core/vdom';\nimport WidgetBase from '@dojo/framework/core/WidgetBase';\nimport * as css from './account_activation.m.css';\nimport SBar from '@dojo/widgets/snackbar';\n\nexport default class AccountActivation extends WidgetBase  {\n\n\tonAttach(){\n\t\tdocument.cookie = \"TOKEN_USER= ; expires = Thu, 01 Jan 1970 00:00:00 GMT\";\n\t\tconsole.log('Borrar');\n\t}\n\n\tprivate _openSnack = false;\n\tprivate _MsgSnackBar = '-';\n\tprivate _SnackType: 'success'|'error'|undefined;\n\t\n\tprivate SnackBar(type: 'success'|'error'|undefined, msg: string){\n\t\tconsole.log('SnackBar '+msg)\t\n\t\tthis._openSnack = true;\n\t\tthis._MsgSnackBar = msg;\n\t\tthis._SnackType = type;\n\t\tthis.invalidate();\n\t\tsetTimeout(()=>{\n\t\t\tthis._openSnack = false;\n\t\t\tthis.invalidate();\n\t\t}, 4000)\t\t\n\t}\n\n\tprotected render(){\n\n\t\treturn v('div', {classes: [css.root]}, [\n\t\t\tv('div', {classes: [css.body]}, [\n\t\t\t\tv('div', {classes: css.wrapper}, [\n\t\t\t\t\tv('div', { classes: [css.container]}, [\n\t\t\t\t\t\tv('h1', {}, ['Bienvenido!']),\n\t\t\t\t\t\tv('div', {}, ['Su cuenta ha sido creada. El siguiente paso es activarla.', \n\t\t\t\t\t\t\tv('p', {}, ['Presione el botÃ³n para activar su cuenta'])\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\tv('form', {classes: css.form, action: \"/xyz\", method: \"POST\", onsubmit: (e: Event)=>{\t\n\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tasync ()=>{\n\n\t\t\t\t\t\t\t\t\tvar paramsString = window.location.hash.split('?')[1];\n\t\t\t\t\t\t\t\t\tvar searchParams = new URLSearchParams(paramsString);\n\n\t\t\t\t\t\t\t\t\tconsole.log(searchParams);\n\n\t\t\t\t\t\t\t\t\tvar datacode = {\n\t\t\t\t\t\t\t\t\t\tcode: searchParams.get(\"activation_code\")\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlet resp = await fetch(\"/account_activation\",{method: 'POST', body: JSON.stringify(datacode), headers: {'Content-Type': 'application/json'}});\n\t\t\t\t\t\t\t\t\tlet data = await resp.json();\n\n\t\t\t\t\t\t\t\t\tconsole.log(data);\n\n\t\t\t\t\t\t\t\t\tif(resp.status == 200){\n\n\t\t\t\t\t\t\t\t\t\tif(data.Register){\n\n\t\t\t\t\t\t\t\t\t\t\tthis.SnackBar('success', data.Message);\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\t\t\t\twindow.location.href = \"/#login\";\n\t\t\t\t\t\t\t\t\t\t\t}, 5000);\n\n\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\tthis.SnackBar('error', data.Message);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tconsole.log('No se pudo registrar', data);\n\t\t\t\t\t\t\t\t\t\t//alert('No se pudo registrar');\n\t\t\t\t\t\t\t\t\t\tthis.SnackBar('error', 'no se pudo guardar');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)();\n\n\t\t\t\t\t\t\t\te.preventDefault();\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}}, [\n\t\t\t\t\t\t\tv('input', {name: 'Continuar', type: 'submit', value: 'Continuar'})\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t])\n\t\t\t\t\t]),\n\t\t\t\tw(SBar, {open: this._openSnack, leading: false, type: this._SnackType, messageRenderer: () => this._MsgSnackBar})\n\t\t\t\t]),\n\t\t\tv('ul', {classes: css.bg_bubbles}, [\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li')\n\t\t\t\t])\n\t\t\t])\n\t}\n}"],"sourceRoot":""}