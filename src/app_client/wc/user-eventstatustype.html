
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../wc/css-bootstrap.html">


<dom-module id="user-eventstatustype">
	<template>

		<style include="css-bootstrap">

		</style>

		<div class="btn-group  btn-group-sm btn-group-justified" id="BlockButton" style="margin-bottom: 3px;">
			<a class="btn btn-default" type="button" id="BChangeStatus"><span class="glyphicon glyphicon-certificate" aria-hidden="true"></span> Cambiar estado</a>
			<a class="btn btn-default" type="button" id="WGeo"></a>                                               

		</div>
	</template>



	<script>
		Polymer({
			is: 'user-eventstatustype',
			properties: {
				points: {
					target: String
				},
				store: {
					type: Object
				},
				field_identifier: {
					type: String
				},
				table: {
					type: String
				},
				field_label: {
					type: String
				}


			},
			ready: function() {

				var t = this;
				t.target = '/njs/db/Select_Generic_to_Store';
				t.table = 'event_statustypes_to_client';
				t.field_label = 'label_status';
				t.field_identifier = 'ideventstatustype';

				require([
					"dojo/dom-construct",
					"dojo/dom-style", 
					'dojo/on',
					"dojo/topic"
					], function (domConstruct, domStyle, on, topic) {


						topic.subscribe("/event/table/changed/"+t.table, function(data){
							t.request_data();
						});

						request_data();


						function request_data(){


							return  request.post(t.target, {
								data: {},
								preventCache: true,
								handleAs: 'json'
							}).then(
							function (response) {
								console.log(response);
//t.store = Observable(new Memory({ data: {identifier: t.field_identifier, items: response}}));


},
function (e) {
	console.error(e, t.target);
}
);

						}












					});





// Fin de ready
}
});





</script>
</dom-module>
